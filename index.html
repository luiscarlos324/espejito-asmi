<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Espejito</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(180deg, #fff0f6, #ffffff);
  font-family: 'Georgia', serif;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
<audio autoplay loop>
  <source src="princesa.mp3" type="audio/mpeg">
  Tu navegador no soporta audio.
</audio>
}

.sparkle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(255, 182, 193, 0.8);
  border-radius: 50%;
  animation: float 6s infinite ease-in-out;
}

@keyframes float {
  0% { transform: translateY(0); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translateY(-120px); opacity: 0; }
}

#container {
  max-width: 90%;
  z-index: 2;
}

h1 {
  color: #b03060;
  font-size: 2em;
}

p {
  font-size: 1.2em;
  color: #6b2a3d;
  min-height: 60px;
  white-space: pre-wrap; /* ‚Üê ESTO arregla los espacios */
}

button {
  margin-top: 25px;
  padding: 15px 25px;
  font-size: 1em;
  border: none;
  border-radius: 30px;
  background-color: #ff7aa2;
  color: white;
  cursor: pointer;
}

#waves {
  display: none;
  margin: 20px auto;
}

.wave {
  display: inline-block;
  width: 8px;
  height: 10px;
  margin: 0 3px;
  background: #ff7aa2;
  animation: wave 1s infinite ease-in-out;
}

.wave:nth-child(2) { animation-delay: .1s }
.wave:nth-child(3) { animation-delay: .2s }
.wave:nth-child(4) { animation-delay: .3s }

@keyframes wave {
  0%,100% { height: 10px }
  50% { height: 40px }
}
</style>
</head>

<body>

<!-- M√∫sica -->
<audio id="music" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/16/audio_7b2f4e4a7a.mp3" type="audio/mpeg">
</audio>

<div id="container">
  <h1 id="title">Asmilda‚Ä¶</h1>
  <p id="text">Di tu pregunta en voz alta.</p>

  <div id="waves">
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
  </div>

  <button id="btn">üé§ Espejito, escucha</button>
</div>

<script>
let step = 0;
let streamAllowed = false;

const responses = [
  "T√∫, Asmilda.",
  "Hasta la pregunta ofende‚Ä¶ tu novio, claro.",
  "La persona que te mand√≥ esto."
];

const btn = document.getElementById("btn");
const text = document.getElementById("text");
const waves = document.getElementById("waves");
const music = document.getElementById("music");

function typeText(message) {
  text.innerText = "";
  let i = 0;
  const interval = setInterval(() => {
    text.innerText += message.charAt(i);
    i++;
    if (i >= message.length) clearInterval(interval);
  }, 50);
}

btn.onclick = async () => {

  if (!streamAllowed) {
    await navigator.mediaDevices.getUserMedia({ audio: true });
    streamAllowed = true;
    music.volume = 0.15;
    music.play();
  }

  if (step < 3) {
    waves.style.display = "block";
    text.innerText = "Escuchando‚Ä¶";

    setTimeout(() => {
      waves.style.display = "none";
      typeText(responses[step]);
      btn.innerText = "Siguiente";
      step++;
    }, 3000);
  } else {
    text.innerHTML = "<strong>¬øQuieres ser el San Valent√≠n de tu novio Luis?</strong>";
    btn.style.display = "none";
  }
};

// Destellos m√°gicos mejorados
setInterval(() => {
  const s = document.createElement("div");
  s.className = "sparkle";

  const size = Math.random() * 6 + 3; // tama√±os variados
  s.style.width = size + "px";
  s.style.height = size + "px";

  s.style.left = Math.random() * 100 + "vw";
  s.style.bottom = "-10px";

  s.style.opacity = Math.random() * 0.6 + 0.4; // m√°s visibles
  s.style.animationDuration = (3 + Math.random() * 3) + "s";

  document.body.appendChild(s);
  setTimeout(() => s.remove(), 6000);
}, 200); // m√°s frecuencia
</script>

</body>
</html>
